<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReadStorage - Scenarium - Telegram Bot Constructor</title>
</head>
<body>
    <div class="main-content">
        <div class="content">

                <section class="section">
                    <h1>üíæ ReadStorage</h1>
                    <p class="lead">Read data from user's local storage with default values and automatic cleanup support.</p>
                    
                    <div class="action-info">
                        <div class="info-card">
                            <h3>üìã Description</h3>
                            <p>ReadStorage is a function for reading data from the user's local storage. Supports default values and automatic cleanup after reading.</p>
                        </div>
                        
                        <div class="info-card">
                            <h3>üéØ Purpose</h3>
                            <ul>
                                <li>Read saved user data</li>
                                <li>Get cached values</li>
                                <li>Use default values</li>
                                <li>Work with temporary data</li>
                            </ul>
                        </div>
                    </div>

                    <h2>‚öôÔ∏è Parameters</h2>
                    <div class="params-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>key</code></td>
                                    <td>string</td>
                                    <td>‚úÖ</td>
                                    <td>Key to read data</td>
                                </tr>
                                <tr>
                                    <td><code>fallbackValue</code></td>
                                    <td>any</td>
                                    <td>‚ùå</td>
                                    <td>Default value if key not found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>üí° Usage Examples</h2>
                    
                    <div class="example-card">
                        <h3>Simple reading</h3>
                        <pre><code class="language-json">{
  "function": "ReadStorage",
  "key": "userName"
}</code></pre>
                        <p><strong>Result:</strong> Saved username or <code>undefined</code></p>
                    </div>

                    <div class="example-card">
                        <h3>With default value</h3>
                        <pre><code class="language-json">{
  "function": "ReadStorage",
  "key": "userName",
  "fallbackValue": "Guest"
}</code></pre>
                        <p><strong>Result:</strong> Saved name or "Guest"</p>
                    </div>

                    <div class="example-card">
                        <h3>Reading settings</h3>
                        <pre><code class="language-json">{
  "function": "ReadStorage",
  "key": "userPreferences",
  "fallbackValue": {
    "theme": "light",
    "language": "en",
    "notifications": true
  }
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Reading temporary data</h3>
                        <pre><code class="language-json">{
  "function": "ReadStorage",
  "key": "tempToken",
  "fallbackValue": null
}</code></pre>
                        <p><strong>Note:</strong> If <code>clearAfterRead: true</code>, value will be deleted after reading</p>
                    </div>

                    <div class="example-card">
                        <h3>As part of other functions</h3>
                        <pre><code class="language-json">{
  "function": "JoinToString",
  "values": [
    "Hello, ",
    {
      "function": "ReadStorage",
      "key": "userName",
      "fallbackValue": "Guest"
    },
    "!"
  ]
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Conditional logic</h3>
                        <pre><code class="language-json">{
  "function": "Equals",
  "values": [
    {
      "function": "ReadStorage",
      "key": "userRole",
      "fallbackValue": "user"
    },
    "admin"
  ],
  "trueResult": "Access granted",
  "falseResult": "Access denied"
}</code></pre>
                    </div>

                    <h2>üîß How it works</h2>
                    <div class="info-card">
                        <h3>Data search</h3>
                        <p>Function searches data in <code>userContext.data.__storage[key]</code>:</p>
                        <ul>
                            <li>If key found - returns <code>value</code></li>
                            <li>If key not found - returns <code>fallbackValue</code></li>
                            <li>If <code>fallbackValue</code> not specified - returns <code>undefined</code></li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h3>Automatic cleanup</h3>
                        <p>If <code>clearAfterRead: true</code> was specified when saving:</p>
                        <ul>
                            <li>Value is returned to user</li>
                            <li>Key is immediately removed from storage after reading</li>
                            <li>Repeated reading will return <code>fallbackValue</code></li>
                        </ul>
                    </div>

                    <h2>üîó Usage in actions</h2>
                    <div class="example-card">
                        <h3>In SendMessage</h3>
                        <pre><code class="language-json">{
  "action": "SendMessage",
  "text": {
    "function": "JoinToString",
    "values": [
      "Your settings:\n",
      "Theme: ",
      {
        "function": "ReadStorage",
        "key": "theme",
        "fallbackValue": "light"
      },
      "\nLanguage: ",
      {
        "function": "ReadStorage",
        "key": "language",
        "fallbackValue": "english"
      }
    ]
  }
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>In Store</h3>
                        <pre><code class="language-json">{
  "action": "Store",
  "key": "lastLogin",
  "value": {
    "function": "JoinToString",
    "values": [
      "{{localContext.currentDate}}",
      " (previous: ",
      {
        "function": "ReadStorage",
        "key": "lastLogin",
        "fallbackValue": "never"
      },
      ")"
    ]
  }
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>In Navigate</h3>
                        <pre><code class="language-json">{
  "action": "Navigate",
  "menuItem": {
    "function": "ReadStorage",
    "key": "lastMenu",
    "fallbackValue": "Main"
  }
}</code></pre>
                    </div>

                    <h2>üóÇÔ∏è Storage structure</h2>
                    <div class="info-card">
                        <h3>Data format</h3>
                        <p>Data in storage has the following structure:</p>
                        <pre><code class="language-json">{
  "__storage": {
    "userName": {
      "value": "John",
      "clearAfterRead": false
    },
    "tempData": {
      "value": "temporary data",
      "clearAfterRead": true
    }
  }
}</code></pre>
                    </div>

                    <h2>‚ö†Ô∏è Important notes</h2>
                    <div class="warning-card">
                        <ul>
                            <li><strong>Key required:</strong> Parameter <code>key</code> must be a string</li>
                            <li><strong>Local storage:</strong> Data is available only within user session</li>
                            <li><strong>Data types:</strong> Data is returned in the same format as it was saved</li>
                            <li><strong>Clear:</strong> When <code>clearAfterRead: true</code> value is deleted after first reading</li>
                            <li><strong>Performance:</strong> Reading happens synchronously</li>
                        </ul>
                    </div>

                    <h2>üîó Related actions and functions</h2>
                    <div class="related-actions">
                        <a href="../actions/store.html" class="related-action">
                            <h4>Store</h4>
                            <p>Store data in storage</p>
                        </a>
                        <a href="#" class="nav-link" data-path="functions/equals.html">
                            <h4>Equals</h4>
                            <p>Compare read data</p>
                        </a>
                        <a href="#" class="nav-link" data-path="functions/join-to-string.html">
                            <h4>JoinToString</h4>
                            <p>Join read data into string</p>
                        </a>
                    </div>
                </section>
            
        </div>
    </div>
</body>
</html>