<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store - Scenarium - Telegram Bot Constructor</title>
</head>
<body>
    <div class="main-content">
        <div class="content">

                <section class="section">
                    <h1>üíæ Store</h1>
                    <p class="lead">Store data in user's local storage with interpolation and automatic cleanup support.</p>
                    
                    <div class="action-info">
                        <div class="info-card">
                            <h3>üìã Description</h3>
                            <p>Store is an action for saving data to the user's local storage. Supports variable interpolation, automatic cleanup and various data types.</p>
                        </div>
                        
                        <div class="info-card">
                            <h3>üéØ Purpose</h3>
                            <ul>
                                <li>Save user data</li>
                                <li>Cache computation results</li>
                                <li>Temporary storage of intermediate values</li>
                                <li>Configure user preferences</li>
                            </ul>
                        </div>
                    </div>

                    <h2>‚öôÔ∏è Parameters</h2>
                    <div class="params-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Default</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>key</code></td>
                                    <td>string</td>
                                    <td>‚úÖ</td>
                                    <td>-</td>
                                    <td>Key for saving data</td>
                                </tr>
                                <tr>
                                    <td><code>value</code></td>
                                    <td>any</td>
                                    <td>‚úÖ</td>
                                    <td>-</td>
                                    <td>Value to store</td>
                                </tr>
                                <tr>
                                    <td><code>clearAfterRead</code></td>
                                    <td>boolean</td>
                                    <td>‚ùå</td>
                                    <td>false</td>
                                    <td>Delete value after reading</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>üí° Usage Examples</h2>
                    
                    <div class="example-card">
                        <h3>Simple saving</h3>
                        <pre><code class="language-json">{
  "action": "Store",
  "key": "userName",
  "value": "{{input.userName}}"
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Save object</h3>
                        <pre><code class="language-json">{
  "action": "Store",
  "key": "userProfile",
  "value": {
    "name": "{{input.name}}",
    "email": "{{input.email}}",
    "phone": "{{input.phone}}",
    "createdAt": "{{localContext.currentDate}}"
  }
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Save with automatic cleanup</h3>
                        <pre><code class="language-json">{
  "action": "Store",
  "key": "tempToken",
  "value": "{{localContext.apiToken}}",
  "clearAfterRead": true
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Save function result</h3>
                        <pre><code class="language-json">{
  "action": "Store",
  "key": "formattedDate",
  "value": {
    "function": "JoinToString",
    "values": [
      "{{localContext.currentDate}}",
      " (",
      "{{userContext.data.timezone}}",
      ")"
    ]
  }
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Save user settings</h3>
                        <pre><code class="language-json">{
  "action": "Store",
  "key": "userPreferences",
  "value": {
    "theme": "{{input.theme}}",
    "language": "{{input.language}}",
    "notifications": "{{input.notifications}}",
    "lastUpdated": "{{localContext.timestamp}}"
  }
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Save data array</h3>
                        <pre><code class="language-json">{
  "action": "Store",
  "key": "shoppingCart",
  "value": [
    {
      "id": "{{input.productId}}",
      "name": "{{input.productName}}",
      "price": "{{input.price}}",
      "quantity": "{{input.quantity}}"
    }
  ]
}</code></pre>
                    </div>

                    <h2>üîß Data processing</h2>
                    <div class="info-card">
                        <h3>Data types</h3>
                        <p>Store supports various data types:</p>
                        <ul>
                            <li><strong>Strings:</strong> Saved as is</li>
                            <li><strong>Numbers:</strong> Converted to string</li>
                            <li><strong>Objects:</strong> Serialized to JSON</li>
                            <li><strong>Arrays:</strong> Serialized to JSON</li>
                            <li><strong>null/undefined:</strong> Saved as "null"/"undefined"</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h3>Interpolation</h3>
                        <p>All values are interpolated before saving:</p>
                        <ul>
                            <li>Variables are replaced with their values</li>
                            <li>Functions are executed and the result is saved</li>
                            <li>Nested objects are interpolated recursively</li>
                        </ul>
                    </div>

                    <h2>üóÇÔ∏è Storage structure</h2>
                    <div class="info-card">
                        <h3>Local storage</h3>
                        <p>Data is saved in <code>userContext.data.__storage</code>:</p>
                        <pre><code class="language-json">{
  "__storage": {
    "userName": {
      "value": "John",
      "clearAfterRead": false
    },
    "tempToken": {
      "value": "abc123",
      "clearAfterRead": true
    }
  }
}</code></pre>
                    </div>

                    <h2>üîó Reading data</h2>
                    <div class="example-card">
                        <h3>Using ReadStorage</h3>
                        <pre><code class="language-json">{
  "function": "ReadStorage",
  "key": "userName",
  "fallbackValue": "Guest"
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>In interpolation</h3>
                        <pre><code class="language-json">{
  "action": "SendMessage",
  "text": "Hello, {{userContext.data.__storage.userName.value}}!"
}</code></pre>
                    </div>

                    <h2>‚ö†Ô∏è Important notes</h2>
                    <div class="warning-card">
                        <ul>
                            <li><strong>Key is required:</strong> Parameter <code>key</code> must be a string</li>
                            <li><strong>Local storage:</strong> Data is available only within the user session</li>
                            <li><strong>Serialization:</strong> Objects and arrays are automatically serialized to JSON</li>
                            <li><strong>Clear:</strong> When <code>clearAfterRead: true</code> the value is deleted after first read</li>
                            <li><strong>Performance:</strong> Large objects may slow down the bot</li>
                        </ul>
                    </div>

                    <h2>üîó Related actions and functions</h2>
                    <div class="related-actions">
                        <a href="../functions/read-storage.html" class="related-action">
                            <h4>ReadStorage</h4>
                            <p>Read data from storage</p>
                        </a>
                        <a href="#" class="nav-link" data-path="actions/request-input.html">
                            <h4>RequestInput</h4>
                            <p>Request data for saving</p>
                        </a>
                        <a href="#" class="nav-link" data-path="actions/send-message.html">
                            <h4>SendMessage</h4>
                            <p>Display saved data</p>
                        </a>
                    </div>

                </section>
            
        </div>
    </div>
</body>
</html>