<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SendMessage - Scenarium Documentation</title>
</head>
<body>
    <div class="main-content">
        <div class="content">
            <section class="section">
                <h1>üì± SendMessage</h1>
                <p class="lead">Send messages to users with support for inline buttons and variable interpolation.</p>
                
                <div class="action-info">
                    <div class="info-card">
                        <h3>üìã Description</h3>
                        <p>SendMessage is the main action for sending text messages to users. Supports inline buttons, variable interpolation, and functions in message text.</p>
                    </div>
                    
                    <div class="info-card">
                        <h3>üéØ Purpose</h3>
                        <ul>
                            <li>Send text messages</li>
                            <li>Create inline buttons for navigation</li>
                            <li>Dynamic text formation with variables</li>
                            <li>Execute functions in message text</li>
                        </ul>
                    </div>
                </div>

                <h2>‚öôÔ∏è Parameters</h2>
                <div class="params-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>text</code></td>
                                <td>string | object</td>
                                <td>‚úÖ</td>
                                <td>Message text or object with function</td>
                            </tr>
                            <tr>
                                <td><code>inlineActions</code></td>
                                <td>array</td>
                                <td>‚ùå</td>
                                <td>Array of inline buttons</td>
                            </tr>
                            <tr>
                                <td><code>markdown</code></td>
                                <td>boolean</td>
                                <td>‚ùå</td>
                                <td>Enable Markdown parsing (default: false)</td>
                            </tr>
                            <tr>
                                <td><code>onSuccess</code></td>
                                <td>action</td>
                                <td>‚ùå</td>
                                <td>Action on successful send</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h2>üîß inlineActions Structure</h2>
                <p>Each element of the <code>inlineActions</code> array should contain:</p>
                <div class="params-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>title</code></td>
                                <td>string</td>
                                <td>‚úÖ</td>
                                <td>Button text</td>
                            </tr>
                            <tr>
                                <td><code>onClick</code></td>
                                <td>action</td>
                                <td>‚úÖ</td>
                                <td>Action when button is clicked</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h2>üí° Usage Examples</h2>
                
                <div class="example-card">
                    <h3>Simple Message</h3>
                    <pre><code class="language-json">{
  "action": "SendMessage",
  "text": "Hello! Welcome to the bot!"
}</code></pre>
                </div>

                <div class="example-card">
                    <h3>Message with Variables</h3>
                    <pre><code class="language-json">{
  "action": "SendMessage",
  "text": "Hello, {{name}}! You are in the {{currentMenu}} menu"
}</code></pre>
                </div>

                <div class="example-card">
                    <h3>Message with Inline Buttons</h3>
                    <pre><code class="language-json">{
  "action": "SendMessage",
  "text": "Choose an action:",
  "inlineActions": [
    {
      "title": "üìä Statistics",
      "onClick": {
        "action": "Navigate",
        "menuItem": "Statistics"
      }
    },
    {
      "title": "‚öôÔ∏è Settings",
      "onClick": {
        "action": "Navigate",
        "menuItem": "Settings"
      }
    }
  ]
}</code></pre>
                </div>

                <div class="example-card">
                    <h3>Message with Markdown Formatting</h3>
                    <pre><code class="language-json">{
  "action": "SendMessage",
  "text": "*Bold text* and _italic_\n\n`code` and [link](https://example.com)",
  "markdown": true
}</code></pre>
                </div>

                <h2>üîó Available Variables</h2>
                <div class="variables-grid">
                    <div class="variable-card">
                        <h4>userContext</h4>
                        <ul>
                            <li><code>{{userId}}</code> - User ID</li>
                            <li><code>{{name}}</code> - User name</li>
                            <li><code>{{currentMenu}}</code> - Current menu</li>
                            <li><code>{{lastMessageId}}</code> - Last message ID</li>
                        </ul>
                    </div>
                    <div class="variable-card">
                        <h4>scenarioContext</h4>
                        <ul>
                            <li><code>{{apiUrl}}</code> - API URL</li>
                            <li><code>{{version}}</code> - Scenario version</li>
                        </ul>
                    </div>
                    <div class="variable-card">
                        <h4>localContext</h4>
                        <ul>
                            <li><code>{{messageId}}</code> - Current message ID</li>
                            <li><code>{{response}}</code> - API response</li>
                            <li><code>{{error}}</code> - Error</li>
                        </ul>
                    </div>
                    <div class="variable-card">
                        <h4>input</h4>
                        <ul>
                            <li><code>{{userName}}</code> - Entered name</li>
                            <li><code>{{email}}</code> - Entered email</li>
                        </ul>
                    </div>
                </div>

                <h2>‚ö†Ô∏è Important Notes</h2>
                <div class="warning-card">
                    <ul>
                        <li><strong>Empty text:</strong> If text is empty or contains only spaces, message will not be sent</li>
                        <li><strong>Inline buttons:</strong> Maximum 8 buttons per row, total number is unlimited</li>
                        <li><strong>Message size:</strong> Maximum 4096 characters for one message</li>
                        <li><strong>Interpolation:</strong> All variables are interpolated before sending</li>
                        <li><strong>Functions in text:</strong> Nested functions are supported for complex logic</li>
                        <li><strong>Markdown parsing:</strong> When Markdown is enabled (<code>markdown: true</code>), the message may fail to send due to unescaped special characters (*, _, [, ], (, ), ~, `, >, #, +, -, =, |, {, }, ., !). Markdown is disabled by default to avoid such issues.</li>
                    </ul>
                </div>
            </section>
        </div>
    </div>
</body>
</html>