<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UpdateMessage - Scenarium - Telegram Bot Constructor</title>
</head>
<body>
    <div class="main-content">
        <div class="content">

                <section class="section">
                    <h1>‚úèÔ∏è UpdateMessage</h1>
                    <p class="lead">Update existing message with interpolation and inline buttons support.</p>
                    
                    <div class="action-info">
                        <div class="info-card">
                            <h3>üìã Description</h3>
                            <p>UpdateMessage is an action for updating an existing message. Supports all SendMessage parameters and automatically determines Message ID to update.</p>
                        </div>
                        
                        <div class="info-card">
                            <h3>üéØ Purpose</h3>
                            <ul>
                                <li>Update message text</li>
                                <li>Change inline buttons</li>
                                <li>Update formatting</li>
                                <li>Dynamic content changes</li>
                            </ul>
                        </div>
                    </div>

                    <h2>‚öôÔ∏è Parameters</h2>
                    <div class="params-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>messageId</code></td>
                                    <td>string | function</td>
                                    <td>‚ùå</td>
                                    <td>Message ID to update (default: last message)</td>
                                </tr>
                                <tr>
                                    <td><code>text</code></td>
                                    <td>string | object</td>
                                    <td>‚úÖ</td>
                                    <td>New message text</td>
                                </tr>
                                <tr>
                                    <td><code>inlineActions</code></td>
                                    <td>array</td>
                                    <td>‚ùå</td>
                                    <td>New inline buttons</td>
                                </tr>
                                <tr>
                                    <td><code>onSuccess</code></td>
                                    <td>action</td>
                                    <td>‚ùå</td>
                                    <td>Action on successful update</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h2>üí° Usage Examples</h2>
                    
                    <div class="example-card">
                        <h3>Simple update</h3>
                        <pre><code class="language-json">{
  "action": "UpdateMessage",
  "text": "Message updated!"
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Update with new buttons</h3>
                        <pre><code class="language-json">{
  "action": "UpdateMessage",
  "text": "Choose new action:",
  "inlineActions": [
    {
      "title": "‚úÖ Done",
      "onClick": {
        "action": "SendMessage",
        "text": "Operation completed!"
      }
    }
  ]
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Update specific message</h3>
                        <pre><code class="language-json">{
  "action": "UpdateMessage",
  "messageId": "{{messageId}}",
  "text": "Status: {{status}}"
}</code></pre>
                    </div>

                    <div class="example-card">
                        <h3>Update with function in text</h3>
                        <pre><code class="language-json">{
  "action": "UpdateMessage",
  "text": {
    "function": "JoinToString",
    "values": [
      "Time: ",
      "{{currentTime}}",
      "\nStatus: ",
      "{{status}}"
    ]
  }
}</code></pre>
                    </div>

                    <h2>üîß How it works</h2>
                    <div class="info-card">
                        <h3>Message ID determination</h3>
                        <p>The system determines Message ID in the following order:</p>
                        <ul>
                            <li>If <code>messageId</code> is specified - uses it</li>
                            <li>If <code>messageId</code> is a function - executes it</li>
                            <li>Otherwise uses <code>messageId</code> from local context</li>
                            <li>As last resort - <code>lastMessageId</code> from user data</li>
                        </ul>
                    </div>

                    <div class="info-card">
                        <h3>Update process</h3>
                        <p>When updating message:</p>
                        <ul>
                            <li>All parameters are interpolated</li>
                            <li>Functions in text are executed</li>
                            <li>Text and inline buttons are updated</li>
                            <li>New Message ID is saved</li>
                        </ul>
                    </div>

                    <h2>‚ö†Ô∏è Important notes</h2>
                    <div class="warning-card">
                        <ul>
                            <li><strong>Message ID:</strong> Must be a valid ID of existing message</li>
                            <li><strong>Telegram limitations:</strong> Cannot update messages older than 48 hours</li>
                            <li><strong>Formatting:</strong> Markdown and HTML are supported</li>
                            <li><strong>Inline buttons:</strong> Completely replace previous buttons</li>
                            <li><strong>Errors:</strong> On update error, action is ignored</li>
                        </ul>
                    </div>

                    <h2>üîó Related actions</h2>
                    <div class="related-actions">
                        <a href="#" class="nav-link" data-path="actions/send-message.html">
                            <h4>SendMessage</h4>
                            <p>Sending new messages</p>
                        </a>
                        <a href="#" class="nav-link" data-path="actions/delete-message.html">
                            <h4>DeleteMessage</h4>
                            <p>Deleting messages</p>
                        </a>
                    </div>

                </section>
            
        </div>
    </div>
</body>
</html>